<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matemática</title>
    <style>
    * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            color: #fff;
        }

        /* Cabeçalho */
        .header-container {
            width: 100%;
            max-width: 1200px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        h2 {
            color: #ffcf00;
            font-size: 32px;
            margin-bottom: 20px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(255, 207, 0, 0.3);
        }

        /* Container principal - LAYOUT VERTICAL */
        .conteudo-principal {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-bottom: 40px;
        }

        .bloco-cinza {
            background-color: #323232;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 2px solid #444;
            height: fit-content;
        }

        /* BLOCO DE VÍDEOS - AGORA EMBAIXO */
        .bloco-videos {
            background-color: #323232;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 2px solid #ffcf00;
            height: fit-content;
        }

        .videos-titulo {
            color: #ffcf00;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #ffcf00;
            padding-bottom: 12px;
        }

        /* SEÇÕES POR MATÉRIA */
        .materia-secao {
            margin-bottom: 30px;
            border: 1px solid #444;
            border-radius: 12px;
            overflow: hidden;
            background: #2a2a2a;
        }

        .materia-titulo {
            background: linear-gradient(135deg, #ffcf00, #ff6b00);
            color: #000;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .videos-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            padding: 20px;
        }

        .video-item {
            background: #242424;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #444;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .video-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 207, 0, 0.3);
            border-color: #ffcf00;
        }

        .video-thumbnail {
            width: 100%;
            height: 120px;
            background: linear-gradient(45deg, #ffcf00, #ff6b00);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-thumbnail::before {
            content: '▶';
            color: white;
            font-size: 30px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .video-info {
            padding: 15px;
            flex: 1;
        }

        .video-categoria {
            color: #ffcf00;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .video-nome {
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .video-descricao {
            color: #ccc;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .video-metadata {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #ffcf00;
        }

        .video-duracao {
            background: rgba(255, 207, 0, 0.2);
            padding: 4px 10px;
            border-radius: 10px;
        }

        /* Conteúdo das matérias */
        .conteudo-portugues {
            color: #ffcf00;
            font-size: 16px;
            line-height: 1.6;
            text-align: left;
        }

        .titulo-secao {
            color: #ffcf00;
            font-size: 22px;
            margin: 25px 0 15px 0;
            border-bottom: 2px solid #ffcf00;
            padding-bottom: 5px;
            font-weight: bold;
        }

        .titulo-subsecao {
            color: #ffcf00;
            font-size: 18px;
            margin: 20px 0 10px 0;
            font-weight: bold;
        }

        .formula {
            background: rgba(255, 207, 0, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 12px 0;
            border-left: 4px solid #ffcf00;
            font-size: 15px;
        }

        .formula p {
            margin-bottom: 8px;
        }

        .formula p:last-child {
            margin-bottom: 0;
        }

        .formula strong {
            color: #ffcf00;
            font-weight: 600;
        }

        /* MODAL DO VÍDEO */
        .video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .video-modal.active {
            display: flex;
        }

        .modal-content {
            position: relative;
            width: 90%;
            max-width: 900px;
            background: #1a1a1a;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(255, 207, 0, 0.3);
            border: 2px solid #ffcf00;
        }

        .close-modal {
            position: absolute;
            top: -15px;
            right: -15px;
            background: #ffcf00;
            color: #000;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: #e6b800;
            transform: scale(1.1);
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* Proporção 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 10px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 10px;
        }

        .video-title {
            color: #ffcf00;
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0 10px 0;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Botão voltar */
        .btn-voltar {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ffcf00;
            color: #000;
            font-size: 24px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(255, 207, 0, 0.4);
            transition: all 0.3s ease;
        }

        .btn-voltar:hover {
            background: #e6b800;
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 207, 0, 0.6);
        }

        /* Scrollbar personalizada */
        .bloco-cinza::-webkit-scrollbar {
            width: 8px;
        }

        .bloco-cinza::-webkit-scrollbar-track {
            background: #242424;
            border-radius: 4px;
        }

        .bloco-cinza::-webkit-scrollbar-thumb {
            background: #ffcf00;
            border-radius: 4px;
        }

        .bloco-cinza::-webkit-scrollbar-thumb:hover {
            background: #ffdd44;
        }

        /* ========== MEDIA QUERIES PARA TABLET ========== */
        @media (max-width: 1024px) {
            .conteudo-principal {
                max-width: 800px;
            }
            
            .bloco-cinza, .bloco-videos {
                padding: 25px;
            }
            
            h2 {
                font-size: 28px;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 15px;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
        }

        /* ========== MEDIA QUERIES PARA MOBILE ========== */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .conteudo-principal {
                gap: 30px;
            }
            
            .bloco-cinza, .bloco-videos {
                padding: 20px;
                border-radius: 15px;
            }
            
            h2 {
                font-size: 24px;
                margin-bottom: 15px;
            }
            
            .videos-titulo {
                font-size: 20px;
                margin-bottom: 20px;
            }
            
            .videos-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .video-thumbnail {
                height: 100px;
            }
            
            .video-info {
                padding: 12px;
            }
            
            .video-nome {
                font-size: 14px;
            }
            
            .video-descricao {
                font-size: 12px;
            }
            
            .titulo-secao {
                font-size: 20px;
            }
            
            .titulo-subsecao {
                font-size: 16px;
            }
            
            .formula {
                padding: 12px;
                font-size: 14px;
            }
            
            .btn-voltar {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }
            
            .close-modal {
                top: -10px;
                right: -10px;
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .video-title {
                font-size: 18px;
            }
            
            .materia-titulo {
                padding: 12px 15px;
                font-size: 16px;
            }
            
            .videos-grid {
                padding: 15px;
                gap: 12px;
            }
        }

        /* ========== MEDIA QUERIES PARA TELAS MUITO PEQUENAS ========== */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .bloco-cinza, .bloco-videos {
                padding: 15px;
            }
            
            h2 {
                font-size: 20px;
            }
            
            .videos-titulo {
                font-size: 18px;
            }
            
            .video-thumbnail {
                height: 80px;
            }
            
            .video-thumbnail::before {
                font-size: 24px;
            }
            
            .modal-content {
                padding: 10px;
            }
        }

        /* ========== MEDIA QUERIES PARA TELAS GRANDES (PC) ========== */
        @media (min-width: 1200px) {
            .conteudo-principal {
                max-width: 1400px;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
            
            .video-thumbnail {
                height: 140px;
            }
        }

        /* ========== MEDIA QUERIES PARA TELAS MUITO GRANDES ========== */
        @media (min-width: 1600px) {
            .conteudo-principal {
                max-width: 1600px;
            }
            
            .bloco-cinza, .bloco-videos {
                padding: 40px;
            }
        }

        /* Animações suaves */
        .formula, .video-item {
            transition: transform 0.3s ease, background 0.3s ease;
        }

        .formula:hover {
            transform: translateX(5px);
            background: rgba(255, 207, 0, 0.2);
        }

    </style>
</head>
<body>
    <h2>Conteúdos de Matemática</h2>

    <div class="conteudo-principal">
        <div class="bloco-cinza">
            <div class="conteudo-matematica">
                <h3 class="titulo-secao">1. Números Inteiros e Racionais</h3>
                <div class="formula">
                    <p><strong>Operações com inteiros:</strong></p>
                    <p>Adição/subtração: Sinais iguais → soma e repete o sinal; sinais diferentes → subtrai e repete o sinal do maior.</p>
                    <p><strong>Multiplicação/divisão:</strong> Sinais iguais → resultado positivo; sinais diferentes → resultado negativo.</p>
                </div>

                <h3 class="titulo-secao">2. Introdução à Álgebra</h3>
                <div class="formula">
                    <p><strong>Expressões algébricas:</strong></p>
                    <p>Termos semelhantes: podem ser somados/subtraídos (ex: 3x + 5x = 8x).</p>
                </div>

                <h3 class="titulo-secao">3. Geometria Plana</h3>
                <div class="formula">
                    <p><strong>Ângulos:</strong></p>
                    <p>Classificação: agudo (&lt;90°), reto (=90°), obtuso (&gt;90°), raso (=180°).</p>
                </div>

                <h3 class="titulo-secao">4. Razão, Proporção e Porcentagem</h3>
                <div class="formula">
                    <p><strong>Razão:</strong> Comparação entre grandezas (ex: 3/5).</p>
                </div>

                <h4 class="titulo-subsecao">Produtos notáveis:</h4>
                <div class="formula">
                    <p>Quadrado da soma: (a + b)² = a² + 2ab + b²</p>
                    <p>Quadrado da diferença: (a - b)² = a² - 2ab + b²</p>
                </div>

                <h4 class="titulo-subsecao">Sistemas de equações:</h4>
                <div class="exemplo">
                    <p>Exemplo: { 2x + y = 10 ; x - y = 2 }</p>
                    <p>Soma: 3x = 12 ⇒ x = 4, y = 2</p>
                </div>

                <h4 class="titulo-subsecao">Geometria - Áreas e volumes:</h4>
                <div class="formula">
                    <p>Cubo: A = 6l², V = l³</p>
                    <p>Paralelepípedo: A = 2(ab + ac + bc), V = a × b × c</p>
                    <p>Cilindro: A_total = 2πr(h + r), V = πr²h</p>
                </div>

                <h4 class="titulo-subsecao">Estatística - Medidas centrais:</h4>
                <div class="formula">
                    <p>Mediana: Valor central em conjunto ordenado</p>
                    <p>Moda: Valor que mais se repete</p>
                </div>

                <h3 class="titulo-secao">5. Funções</h3>
                
                <h4 class="titulo-subsecao">Função Afim: f(x) = ax + b</h4>
                <div class="formula">
                    <p><strong>Gráfico:</strong> reta</p>
                    <p><strong>Coeficiente angular (a):</strong> inclinação da reta</p>
                    <p><strong>Coeficiente linear (b):</strong> ponto onde corta o eixo y</p>
                </div>

                <h4 class="titulo-subsecao">Função Quadrática: f(x) = ax² + bx + c</h4>
                <div class="formula">
                    <p><strong>Gráfico:</strong> parábola</p>
                    <p><strong>Vértice:</strong> xv = -b/2a, yv = -Δ/4a</p>
                    <p><strong>Concavidade:</strong> para cima se a &gt; 0; para baixo se a &lt; 0</p>
                </div>

                <h3 class="titulo-secao">6. Geometria Avançada</h3>
                
                <h4 class="titulo-subsecao">Circunferência:</h4>
                <div class="formula">
                    <p><strong>Comprimento:</strong> C = 2πr</p>
                    <p><strong>Área:</strong> A = πr²</p>
                </div>

                <h4 class="titulo-subsecao">Sólidos Geométricos:</h4>
                <div class="formula">
                    <p><strong>Cone:</strong> V = 1/3 πr²h</p>
                    <p><strong>Esfera:</strong> V = 4/3 πr³, A = 4πr²</p>
                </div>

                <h3 class="titulo-secao">7. Probabilidade</h3>
                <div class="formula">
                    <p><strong>Espaço amostral (U):</strong> conjunto de resultados possíveis</p>
                    <p><strong>Probabilidade:</strong> P(A) = n(A) / n(U)</p>
                </div>

                <h3 class="titulo-secao">8. Trigonometria</h3>
                
                <h4 class="titulo-subsecao">Razões Trigonométricas:</h4>
                <div class="formula">
                    <p>sen = cateto oposto / hipotenusa</p>
                    <p>cos = cateto adjacente / hipotenusa</p>
                    <p>tan = cateto oposto / cateto adjacente</p>
                </div>

                <h4 class="titulo-subsecao">Ângulos Notáveis:</h4>
                <div class="formula">
                    <p><strong>30°:</strong> sen=1/2, cos=√3/2, tan=√3/3</p>
                    <p><strong>45°:</strong> sen=√2/2, cos=√2/2, tan=1</p>
                    <p><strong>60°:</strong> sen=√3/2, cos=1/2, tan=√3</p>
                </div>

                <h3 class="titulo-secao">9. Conjuntos Numéricos</h3>
                <div class="formula">
                    <p><strong>Naturais (N):</strong> {0, 1, 2, 3, ...}</p>
                    <p><strong>Inteiros (Z):</strong> {..., -2, -1, 0, 1, 2, ...}</p>
                    <p><strong>Racionais (Q):</strong> {a/b | a,b ∈ Z, b ≠ 0}</p>
                    <p><strong>Irracionais (I):</strong> π, √2, e</p>
                    <p><strong>Reais (R):</strong> Q ∪ I</p>
                </div>

                <h3 class="titulo-secao">10. Funções - Conceitos Avançados</h3>
                <div class="formula">
                    <p><strong>Domínio:</strong> valores que x pode assumir</p>
                    <p><strong>Contradomínio:</strong> valores possíveis para f(x)</p>
                    <p><strong>Imagem:</strong> valores que f(x) realmente assume</p>
                    <p><strong>Função composta:</strong> f(g(x))</p>
                    <p><strong>Função inversa:</strong> f⁻¹(y) = x</p>
                </div>

                <h3 class="titulo-secao">11. Progressões</h3>
                
                <h4 class="titulo-subsecao">Progressão Aritmética (PA):</h4>
                <div class="formula">
                    <p><strong>Termo geral:</strong> aₙ = a₁ + (n-1)r</p>
                    <p><strong>Soma:</strong> Sₙ = (a₁ + aₙ)n/2</p>
                </div>

                <h4 class="titulo-subsecao">Progressão Geométrica (PG):</h4>
                <div class="formula">
                    <p><strong>Termo geral:</strong> aₙ = a₁ ⋅ qⁿ⁻¹</p>
                    <p><strong>Soma:</strong> Sₙ = a₁(qⁿ - 1)/(q - 1)</p>
                </div>

                <h3 class="titulo-secao">12. Trigonometria Avançada</h3>
                
                <h4 class="titulo-subsecao">Círculo Trigonométrico:</h4>
                <div class="formula">
                    <p><strong>Seno:</strong> coordenada y</p>
                    <p><strong>Cosseno:</strong> coordenada x</p>
                    <p><strong>Tangente:</strong> sen/cos</p>
                </div>

                <h4 class="titulo-subsecao">Relações Fundamentais:</h4>
                <div class="formula">
                    <p>sen²x + cos²x = 1</p>
                    <p>1 + tan²x = sec²x</p>
                    <p>1 + cot²x = csc²x</p>
                </div>

                <h3 class="titulo-secao">13. Matrizes e Determinantes</h3>
                
                <h4 class="titulo-subsecao">Matrizes:</h4>
                <div class="formula">
                    <p><strong>Igualdade:</strong> mesma ordem e elementos correspondentes iguais</p>
                    <p><strong>Multiplicação:</strong> nº colunas 1ª = nº linhas 2ª</p>
                </div>

                <h4 class="titulo-subsecao">Determinantes:</h4>
                <div class="formula">
                    <p><strong>Matriz 2x2:</strong> det = ad - bc</p>
                    <p><strong>Matriz 3x3:</strong> Regra de Sarrus</p>
                </div>

                <h3 class="titulo-secao">14. Geometria Analítica</h3>
                
                <div class="formula">
                    <p><strong>Distância entre pontos:</strong> d = √[(x₂-x₁)² + (y₂-y₁)²]</p>
                    <p><strong>Equação da reta:</strong> y = mx + n (reduzida)</p>
                    <p><strong>Circunferência:</strong> (x - a)² + (y - b)² = r²</p>
                </div>

                <h3 class="titulo-secao">15. Função Exponencial e Logarítmica</h3>
                
                <h4 class="titulo-subsecao">Função Exponencial:</h4>
                <div class="formula">
                    <p>f(x) = aˣ (a &gt; 0, a ≠ 1)</p>
                </div>

                <h4 class="titulo-subsecao">Logaritmos:</h4>
                <div class="formula">
                    <p>log₈ a = c ⇔ bᶜ = a</p>
                    <p><strong>Propriedades:</strong></p>
                    <p>log(a⋅b) = log a + log b</p>
                    <p>log(a/b) = log a - log b</p>
                    <p>log aᵇ = b ⋅ log a</p>
                </div>

                <h3 class="titulo-secao">16. Análise Combinatória</h3>
                
                <div class="formula">
                    <p><strong>Permutação:</strong> Pₙ = n!</p>
                    <p><strong>Arranjo:</strong> Aₙ,ₚ = n!/(n-p)!</p>
                    <p><strong>Combinação:</strong> Cₙ,ₚ = n!/[p!(n-p)!]</p>
                </div>

                <h3 class="titulo-secao">17. Números Complexos</h3>
                
                <div class="formula">
                    <p><strong>Forma algébrica:</strong> z = a + bi</p>
                    <p><strong>Conjugado:</strong> z̅ = a - bi</p>
                    <p><strong>Operações:</strong> adição, subtração, multiplicação, divisão</p>
                </div>

                <h3 class="titulo-secao">18. Polinômios</h3>
                
                <div class="formula">
                    <p><strong>Grau:</strong> maior expoente da variável</p>
                    <p><strong>Raiz:</strong> valor de x que torna P(x) = 0</p>
                    <p><strong>Divisão:</strong> método da chave ou Briot-Ruffini</p>
                </div>

                <h3 class="titulo-secao">19. Probabilidade Avançada</h3>
                
                <div class="formula">
                    <p><strong>Probabilidade condicional:</strong> P(A|B) = P(A∩B)/P(B)</p>
                    <p><strong>Eventos independentes:</strong> P(A∩B) = P(A)⋅P(B)</p>
                </div>

                <h3 class="titulo-secao">20. Limites e Derivadas</h3>
                
                <h4 class="titulo-subsecao">Limites:</h4>
                <div class="formula">
                    <p>Comportamento da função quando x se aproxima de um valor</p>
                </div>

                <h4 class="titulo-subsecao">Derivadas:</h4>
                <div class="formula">
                    <p><strong>Taxa de variação instantânea</strong></p>
                    <p><strong>Regras:</strong></p>
                    <p>constante → 0</p>
                    <p>xⁿ → nxⁿ⁻¹</p>
                    <p>sen x → cos x</p>
                    <p>cos x → -sen x</p>
                </div>
            </div>
        </div>

        <div class="bloco-videos">
            <div class="videos-titulo">
                🎬 Biblioteca de Vídeos - Matemática
            </div>
            
            <!-- Loading State -->
            <div id="videos-loading" class="loading-videos">
                <div class="spinner"></div>
                <p>Carregando vídeos...</p>
            </div>

            <!-- Error State -->
            <div id="videos-error" class="error-message" style="display: none;">
                <p>Erro ao carregar vídeos. Verifique sua conexão.</p>
                <button class="retry-btn" onclick="carregarVideos()">Tentar Novamente</button>
            </div>

            <!-- Container dos Vídeos (será preenchido via JavaScript) -->
            <div id="videos-container" class="videos-lista" style="display: none;">
                <!-- Os vídeos serão carregados aqui dinamicamente -->
            </div>
        </div>
    </div>

    <!-- MODAL DO VÍDEO -->
    <div class="video-modal" id="videoModal">
        <div class="modal-content">
            <button class="close-modal" onclick="fecharVideo()">×</button>
            <div class="video-container" id="videoContainer">
                <!-- O vídeo será inserido aqui via JavaScript -->
            </div>
            <div class="video-title" id="videoTitle">
                <!-- O título será inserido aqui via JavaScript -->
            </div>
        </div>
    </div>

    <button class="btn-voltar" onclick="history.back()">←</button>

 <script>
  const API_BASE_URL = 'https://coliseum-api.onrender.com';
        let todosVideos = [];

        // INICIALIZAR AO CARREGAR A PÁGINA
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Iniciando página de Matemática...');
            carregarVideos();
        });

        // CARREGAR VÍDEOS DA API
        async function carregarVideos() {
            try {
                mostrarLoading(true);
                mostrarErro(false);
                esconderVideos();

                console.log('📹 Buscando vídeos da API...');
                
                const response = await fetch(`${API_BASE_URL}/api/videos`);
                
                if (!response.ok) {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
                
                const videos = await response.json();
                console.log('✅ Vídeos carregados:', videos);
                
                todosVideos = videos;
                organizarEExibirVideos(videos);
                
            } catch (error) {
                console.error('❌ Erro ao carregar vídeos:', error);
                mostrarErro(true);
                mostrarLoading(false);
            }
        }

        // ORGANIZAR VÍDEOS POR CATEGORIA E EXIBIR
        function organizarEExibirVideos(videos) {
            if (!videos || videos.length === 0) {
                exibirMensagemVazia();
                return;
            }

            // Filtrar apenas vídeos de Matemática
            const materiasMatematica = ['matematica', 'algebra', 'geometria', 'trigonometria', 'calculo'];
            const videosFiltrados = videos.filter(video => 
                materiasMatematica.includes(video.materia)
            );

            if (videosFiltrados.length === 0) {
                exibirMensagemVazia();
                return;
            }

            // Agrupar vídeos por categoria
            const videosPorCategoria = agruparPorCategoria(videosFiltrados);
            
            // Gerar HTML
            const html = gerarHTMLVideos(videosPorCategoria);
            
            // Inserir no DOM
            document.getElementById('videos-container').innerHTML = html;
            
            // Mostrar container
            mostrarVideos();
            mostrarLoading(false);
        }

        // AGRUPAR VÍDEOS POR CATEGORIA
        function agruparPorCategoria(videos) {
            const categorias = {
                'algebra': { titulo: '📊 Álgebra', videos: [] },
                'geometria': { titulo: '📐 Geometria', videos: [] },
                'trigonometria': { titulo: '📏 Trigonometria', videos: [] },
                'funcoes': { titulo: '📈 Funções', videos: [] },
                'probabilidade': { titulo: '🎲 Probabilidade', videos: [] },
                'calculo': { titulo: '📚 Cálculo', videos: [] },
                'matematica': { titulo: '🔢 Matemática Geral', videos: [] }
            };

            videos.forEach(video => {
                // Determinar categoria baseada na matéria ou categoria do vídeo
                let categoria = 'matematica'; // padrão
                
                if (video.categoria) {
                    const catLower = video.categoria.toLowerCase();
                    if (catLower.includes('álgebra') || catLower.includes('algebra')) categoria = 'algebra';
                    else if (catLower.includes('geometria')) categoria = 'geometria';
                    else if (catLower.includes('trigonometria')) categoria = 'trigonometria';
                    else if (catLower.includes('funções') || catLower.includes('funcoes')) categoria = 'funcoes';
                    else if (catLower.includes('probabilidade')) categoria = 'probabilidade';
                    else if (catLower.includes('cálculo') || catLower.includes('calculo')) categoria = 'calculo';
                }
                
                if (categorias[categoria]) {
                    categorias[categoria].videos.push(video);
                } else {
                    categorias.matematica.videos.push(video);
                }
            });

            return categorias;
        }

        // GERAR HTML DOS VÍDEOS
        function gerarHTMLVideos(videosPorCategoria) {
            let html = '';
            
            // Álgebra
            if (videosPorCategoria.algebra.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.algebra.titulo, videosPorCategoria.algebra.videos);
            }
            
            // Geometria
            if (videosPorCategoria.geometria.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.geometria.titulo, videosPorCategoria.geometria.videos);
            }
            
            // Trigonometria
            if (videosPorCategoria.trigonometria.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.trigonometria.titulo, videosPorCategoria.trigonometria.videos);
            }
            
            // Funções
            if (videosPorCategoria.funcoes.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.funcoes.titulo, videosPorCategoria.funcoes.videos);
            }
            
            // Probabilidade
            if (videosPorCategoria.probabilidade.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.probabilidade.titulo, videosPorCategoria.probabilidade.videos);
            }
            
            // Cálculo
            if (videosPorCategoria.calculo.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.calculo.titulo, videosPorCategoria.calculo.videos);
            }
            
            // Matemática Geral (fallback)
            if (videosPorCategoria.matematica.videos.length > 0) {
                html += criarSecaoCategoria(videosPorCategoria.matematica.titulo, videosPorCategoria.matematica.videos);
            }

            return html;
        }

        // CRIAR SEÇÃO DE CATEGORIA
        function criarSecaoCategoria(titulo, videos) {
            return `
                <div class="materia-secao">
                    <div class="materia-titulo">
                        ${titulo}
                    </div>
                    <div class="videos-grid">
                        ${videos.map(video => criarCardVideo(video)).join('')}
                    </div>
                </div>
            `;
        }

        // CRIAR CARD DE VÍDEO INDIVIDUAL
        function criarCardVideo(video) {
            const cores = {
                'algebra': ['#4CAF50', '#2196F3'],
                'geometria': ['#FF9800', '#4CAF50'],
                'trigonometria': ['#9C27B0', '#E91E63'],
                'funcoes': ['#2196F3', '#03A9F4'],
                'probabilidade': ['#FF5722', '#FF9800'],
                'calculo': ['#795548', '#8BC34A'],
                'matematica': ['#607D8B', '#9E9E9E']
            };

            // Determinar cor baseada na categoria
            let corCategoria = 'matematica';
            if (video.categoria) {
                const catLower = video.categoria.toLowerCase();
                if (catLower.includes('álgebra') || catLower.includes('algebra')) corCategoria = 'algebra';
                else if (catLower.includes('geometria')) corCategoria = 'geometria';
                else if (catLower.includes('trigonometria')) corCategoria = 'trigonometria';
                else if (catLower.includes('funções') || catLower.includes('funcoes')) corCategoria = 'funcoes';
                else if (catLower.includes('probabilidade')) corCategoria = 'probabilidade';
                else if (catLower.includes('cálculo') || catLower.includes('calculo')) corCategoria = 'calculo';
            }
            
            const cor = cores[corCategoria] || ['#ffcf00', '#ff6b00'];
            
            // Garantir que a URL seja embed
            const embedUrl = garantirUrlEmbed(video.url);
            
            return `
                <div class="video-item" onclick="abrirVideo('${embedUrl}', '${video.titulo.replace(/'/g, "\\'")}')">
                    <div class="video-thumbnail" style="background: linear-gradient(45deg, ${cor[0]}, ${cor[1]});"></div>
                    <div class="video-info">
                        <div class="video-categoria">${obterEmojiCategoria(corCategoria)} ${formatarCategoria(video.categoria || 'Matemática')}</div>
                        <div class="video-nome">${video.titulo}</div>
                        <div class="video-descricao">${video.descricao || 'Assista este vídeo para aprender mais sobre o conteúdo.'}</div>
                        <div class="video-metadata">
                            <span class="video-duracao">⏱️ ${video.duracao || '?'} min</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // FUNÇÕES AUXILIARES
        function garantirUrlEmbed(url) {
            if (!url) return '';
            
            // Se já é uma URL embed, retorna como está
            if (url.includes('embed')) return url;
            
            // Se é URL normal do YouTube, converte para embed
            if (url.includes('youtube.com/watch?v=')) {
                const videoId = url.split('v=')[1]?.split('&')[0];
                return videoId ? `https://www.youtube.com/embed/${videoId}` : url;
            }
            
            // Se é youtu.be
            if (url.includes('youtu.be/')) {
                const videoId = url.split('youtu.be/')[1]?.split('?')[0];
                return videoId ? `https://www.youtube.com/embed/${videoId}` : url;
            }
            
            return url;
        }

        function obterEmojiCategoria(categoria) {
            const emojis = {
                'algebra': '🔢',
                'geometria': '📐',
                'trigonometria': '📏',
                'funcoes': '📈',
                'probabilidade': '🎲',
                'calculo': '📚',
                'matematica': '🧮'
            };
            return emojis[categoria] || '🎬';
        }

        function formatarCategoria(categoria) {
            if (!categoria) return 'MATEMÁTICA';
            return categoria.toUpperCase();
        }

        // CONTROLE DE ESTADOS DA UI
        function mostrarLoading(mostrar) {
            document.getElementById('videos-loading').style.display = mostrar ? 'block' : 'none';
        }

        function mostrarErro(mostrar) {
            document.getElementById('videos-error').style.display = mostrar ? 'block' : 'none';
        }

        function mostrarVideos() {
            document.getElementById('videos-container').style.display = 'block';
        }

        function esconderVideos() {
            document.getElementById('videos-container').style.display = 'none';
        }

        function exibirMensagemVazia() {
            document.getElementById('videos-container').innerHTML = `
                <div style="text-align: center; padding: 40px; color: #888;">
                    <i class="fas fa-video-slash" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Nenhum vídeo disponível</h3>
                    <p>Os vídeos de Matemática serão adicionados em breve.</p>
                </div>
            `;
            mostrarVideos();
            mostrarLoading(false);
        }

        // FUNÇÕES DO MODAL
        function abrirVideo(embedUrl, titulo) {
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('videoContainer');
            const titleElement = document.getElementById('videoTitle');
            
            // Limpar conteúdo anterior
            container.innerHTML = '';
            
            // Criar iframe do vídeo
            const iframe = document.createElement('iframe');
            iframe.src = embedUrl;
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            iframe.allowFullscreen = true;
            
            container.appendChild(iframe);
            titleElement.textContent = titulo;
            
            // Mostrar modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function fecharVideo() {
            const modal = document.getElementById('videoModal');
            const container = document.getElementById('videoContainer');
            
            // Limpar o vídeo
            container.innerHTML = '';
            
            // Fechar modal
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Fechar modal ao clicar fora
        document.getElementById('videoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                fecharVideo();
            }
        });

        // Fechar modal com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                fecharVideo();
            }
        });
    </script>
</body>
</html>







